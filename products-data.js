// Products Data for Hadaya Emirates Store - FIXED VERSION
// Generated from sa3at.json and otor.json with proper slugs and image links
window.productsData = [
    {
        id: 1,
        title: "ساعة رولكس يخت ماستر - فضي",
        price: 370,
        salePrice: 320,
        image: "https://m5zoon.com/public/uploads/products/1689086291310824.webp",
        slug: "ساعة-رولكس-يخت-ماستر-فضي",
        description: "منتج فاخر ومميز - ساعة رولكس يخت ماستر - فضي. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "الساعات",
        categoryEn: "watches",
        rating: 4.5,
        reviews: 23,
        featured: true,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 2,
        title: "ساعة Rolex كلاسيكية 41 ملم 2022",
        price: 375,
        salePrice: 325,
        image: "https://m5zoon.com/public/uploads/products/1741223185271965.png",
        slug: "ساعة-Rolex-كلاسيكية-41-ملم-2022",
        description: "منتج فاخر ومميز - ساعة Rolex كلاسيكية 41 ملم 2022. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "الساعات",
        categoryEn: "watches",
        rating: 4.5,
        reviews: 23,
        featured: false,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 3,
        title: "ساعة rolex باللون الأسود R21",
        price: 364,
        salePrice: 314,
        image: "https://m5zoon.com/public/uploads/products/1681005528571671.webp",
        slug: "ساعة-rolex-باللون-الأسود-R21",
        description: "منتج فاخر ومميز - ساعة rolex باللون الأسود R21. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "الساعات",
        categoryEn: "watches",
        rating: 4.5,
        reviews: 23,
        featured: false,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 4,
        title: "ساعة rolex 40ملم R54",
        price: 365,
        salePrice: 315,
        image: "https://m5zoon.com/public/uploads/products/1681164046332341.webp",
        slug: "ساعة-rolex-40ملم-R54",
        description: "منتج فاخر ومميز - ساعة rolex 40ملم R54. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "الساعات",
        categoryEn: "watches",
        rating: 4.5,
        reviews: 23,
        featured: false,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 5,
        title: "ساعة rolex باللون الأخضر الملكي",
        price: 364,
        salePrice: 314,
        image: "https://m5zoon.com/public/uploads/products/1741222920546873.png",
        slug: "ساعة-rolex-باللون-الأخضر-الملكي",
        description: "منتج فاخر ومميز - ساعة rolex باللون الأخضر الملكي. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "الساعات",
        categoryEn: "watches",
        rating: 4.5,
        reviews: 23,
        featured: true,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 6,
        title: "ساعة rolex باللون الذهبي والأسود",
        price: 360,
        salePrice: 310,
        image: "https://m5zoon.com/public/uploads/products/1757284688463569.webp",
        slug: "ساعة-rolex-باللون-الذهبي-والأسود",
        description: "منتج فاخر ومميز - ساعة rolex باللون الذهبي والأسود. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "الساعات",
        categoryEn: "watches",
        rating: 4.5,
        reviews: 23,
        featured: false,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 7,
        title: "ساعة rolex باللون الأسود والفضي",
        price: 390,
        salePrice: 340,
        image: "https://m5zoon.com/public/uploads/products/1741222642273682.png",
        slug: "ساعة-rolex-باللون-الأسود-والفضي",
        description: "منتج فاخر ومميز - ساعة rolex باللون الأسود والفضي. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "الساعات",
        categoryEn: "watches",
        rating: 4.5,
        reviews: 23,
        featured: false,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 8,
        title: "ساعة اوميغا سواتش بيبي بلو",
        price: 375,
        salePrice: 325,
        image: "https://m5zoon.com/public/uploads/products/1720305672749191.webp",
        slug: "ساعة-اوميغا-سواتش-بيبي-بلو",
        description: "منتج فاخر ومميز - ساعة اوميغا سواتش بيبي بلو. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "الساعات",
        categoryEn: "watches",
        rating: 4.5,
        reviews: 23,
        featured: false,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 9,
        title: "ساعة اوميغا سواتش نبيتى",
        price: 375,
        salePrice: 325,
        image: "https://m5zoon.com/public/uploads/products/1741222388454456.png",
        slug: "ساعة-اوميغا-سواتش-نبيتى",
        description: "منتج فاخر ومميز - ساعة اوميغا سواتش نبيتى. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "الساعات",
        categoryEn: "watches",
        rating: 4.5,
        reviews: 23,
        featured: false,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 10,
        title: "ساعة اوميغا سواتش صفراء",
        price: 375,
        salePrice: 325,
        image: "https://m5zoon.com/public/uploads/products/1741221412352160.png",
        slug: "ساعة-اوميغا-سواتش-صفراء",
        description: "منتج فاخر ومميز - ساعة اوميغا سواتش صفراء. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "الساعات",
        categoryEn: "watches",
        rating: 4.5,
        reviews: 23,
        featured: true,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 201,
        title: "عطر كوكو شانيل 100 مل",
        price: 352,
        salePrice: 252,
        image: "https://m5zoon.com/public/uploads/products/1722352332177124.webp",
        slug: "عطر-كوكو-شانيل-100-مل",
        description: "منتج فاخر ومميز - عطر كوكو شانيل 100 مل. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "العطور",
        categoryEn: "perfumes",
        rating: 4.5,
        reviews: 23,
        featured: false,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 202,
        title: "عطر جوتشي فلورا",
        price: 352,
        salePrice: 252,
        image: "https://m5zoon.com/public/uploads/products/1720344963790342.webp",
        slug: "عطر-جوتشي-فلورا",
        description: "منتج فاخر ومميز - عطر جوتشي فلورا. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "العطور",
        categoryEn: "perfumes",
        rating: 4.5,
        reviews: 23,
        featured: false,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 203,
        title: "عطر جوتشي بلوم",
        price: 352,
        salePrice: 252,
        image: "https://m5zoon.com/public/uploads/products/1720344971935939.webp",
        slug: "عطر-جوتشي-بلوم",
        description: "منتج فاخر ومميز - عطر جوتشي بلوم. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "العطور",
        categoryEn: "perfumes",
        rating: 4.5,
        reviews: 23,
        featured: false,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 204,
        title: "عطر سوفاج ديور 100 مل",
        price: 352,
        salePrice: 252,
        image: "https://m5zoon.com/public/uploads/products/1720344979304336.webp",
        slug: "عطر-سوفاج-ديور-100-مل",
        description: "منتج فاخر ومميز - عطر سوفاج ديور 100 مل. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "العطور",
        categoryEn: "perfumes",
        rating: 4.5,
        reviews: 23,
        featured: false,
        availability: "in_stock",
        brand: "علامة فاخرة"
    },
    {
        id: 205,
        title: "عطر فرزاتشي ايروس",
        price: 352,
        salePrice: 252,
        image: "https://m5zoon.com/public/uploads/products/1720345001981811.webp",
        slug: "عطر-فرزاتشي-ايروس",
        description: "منتج فاخر ومميز - عطر فرزاتشي ايروس. جودة عالية وتصميم راقي يناسب جميع المناسبات والأوقات المختلفة.",
        category: "العطور",
        categoryEn: "perfumes",
        rating: 4.5,
        reviews: 23,
        featured: true,
        availability: "in_stock",
        brand: "علامة فاخرة"
    }
];

// Optimized search functions
function getProductBySlug(slug) {
    if (!slug) return null;
    
    // Clean and normalize the slug
    const normalizedSlug = decodeURIComponent(slug)
        .trim()
        .replace(/\u200f|\u200e/g, '') // Remove RTL/LTR marks
        .replace(/\s+/g, '-')
        .toLowerCase();
    
    // Try exact match first
    let product = window.productsData.find(product => {
        const productSlug = product.slug.toLowerCase().replace(/\s+/g, '-');
        return productSlug === normalizedSlug;
    });
    
    if (product) return product;
    
    // Try partial match
    product = window.productsData.find(product => {
        const title = product.title.toLowerCase();
        const searchTerms = normalizedSlug.split('-');
        return searchTerms.every(term => title.includes(term));
    });
    
    if (product) return product;
    
    // Try by ID if slug looks like a number
    const idMatch = slug.match(/\d+/);
    if (idMatch) {
        const id = parseInt(idMatch[0]);
        product = window.productsData.find(p => p.id === id);
    }
    
    return product;
}

function getProductById(id) {
    return window.productsData.find(product => product.id === parseInt(id));
}

function getProductsByCategory(category) {
    if (category === 'watches') return window.productsData.filter(p => p.categoryEn === 'watches');
    if (category === 'perfumes') return window.productsData.filter(p => p.categoryEn === 'perfumes');
    return window.productsData.filter(product => 
        product.category === category || product.categoryEn === category
    );
}

function searchProducts(query) {
    const searchTerm = query.toLowerCase();
    return window.productsData.filter(product => 
        product.title.toLowerCase().includes(searchTerm) ||
        product.description.toLowerCase().includes(searchTerm) ||
        product.category.toLowerCase().includes(searchTerm)
    );
}

function getFeaturedProducts() {
    return window.productsData.filter(product => product.featured);
}

// Total products count
window.totalProducts = window.productsData.length;

console.log(`✅ متجر هدايا الإمارات: تم تحميل ${window.totalProducts} منتج بنجاح!`);
console.log(`⌚ الساعات: ${getProductsByCategory('watches').length} منتج`);
console.log(`🌸 العطور: ${getProductsByCategory('perfumes').length} منتج`);

// Debugging helper
window.debugProduct = function(slug) {
    console.log('Searching for slug:', slug);
    const product = getProductBySlug(slug);
    console.log('Found product:', product);
    return product;
};